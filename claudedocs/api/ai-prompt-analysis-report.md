# AI 프롬프트 & 리포트 품질 분석 보고서

> **작성일**: 2026-02-09
> **분석 대상**: `src/features/report/lib/prompt-builder.ts` (시스템 프롬프트 + 사용자 프롬프트)
> **관련 파일**: `report/actions.ts`, `report/schema.ts`, `report/components/`, `analysis/lib/grade.ts`

---

## 1. 현재 프롬프트 구조 분석

### 1.1 시스템 프롬프트 — 페르소나 & 말투

**설정된 페르소나**:

> "직접 가게를 3번 창업해보고, 지금은 소상공인 상권 분석 컨설턴트로 일하고 있는 10년 차 전문가"

**말투 지시**:

| 지시 내용 | 현재 설정 | 평가 |
|:----------|:---------|:-----|
| 톤 | "창업 카페에서 선배가 후배한테 얘기해주듯" | 친근하지만 전문성이 희석될 위험 |
| 존칭 | "~해요", "~거든요", "~이에요" 체 | 한국어 캐주얼 존댓말. 적절함 |
| 데이터 언급 | "숫자를 말할 때는 반드시 근거 데이터를 같이 언급" | 신뢰도 확보에 핵심적. 잘 설정됨 |
| 솔직함 | "위험한 건 솔직히 좀 걱정되는 부분이에요 라고 직접 말해" | 좋음. 다만 부정적 표현이 단조로움 |
| 제언 규칙 | "열심히 하세요 같은 뻔한 말 금지" | 구체적 행동 유도. 좋음 |

#### 현재 말투의 강점

- "~거든요", "~이에요" 체로 **딱딱하지 않고 읽기 편한** 톤
- 숫자 근거 필수 언급으로 **막연한 표현 방지**
- 구체적 행동 제언 ("배달앱 입점 후 초기 3개월은 프로모션에 집중하세요") 요구

#### 현재 말투의 약점

| 문제 | 구체 예시 | 영향 |
|:-----|:---------|:-----|
| **부정 표현 단조로움** | "솔직히 좀 걱정되는 부분이에요"만 반복 가능 | AI가 위험 요소마다 같은 문구 사용 → 단조롭게 느껴짐 |
| **페르소나 깊이 부족** | "3번 창업"이라고만 설정 | 어떤 업종을 했는지, 어떤 실패를 겪었는지 디테일 없음 → AI가 페르소나를 깊게 연기하기 어려움 |
| **감정 레인지 제한** | 좋으면 "괜찮아요", 나쁘면 "걱정이에요" 정도 | 80점과 95점의 톤 차이, 20점과 35점의 톤 차이가 불명확 |
| **업종별 뉘앙스 부재** | 업종 특성 언급은 "한국 상권에서 꼭 고려할 것"에 일반적으로만 | 치킨집 리포트와 미용실 리포트의 어조/관점 차이가 없을 수 있음 |

---

### 1.2 사용자 프롬프트 — 데이터 주입 구조

현재 프롬프트에 주입되는 데이터 섹션:

```
## 분석 대상          ← 위치, 업종, 반경
## 수집 데이터
  ### 상권 현황        ← NPS: 사업장 수, 활성/휴업/폐업, 생존율
  ### 종합 스코어      ← 5개 지표별 등급(A~F) + 퍼센트
  ### 부동산 시세      ← 평균 거래가, 거래 건수
  ### 인구 현황        ← KOSIS: 총인구, 세대수 (있을 때만)
  ### 골목상권 분석    ← 서울만: 매출, 피크, 소비층, 점포, 변화지표
## 출력 형식           ← JSON 구조 지정
```

#### 데이터 주입의 강점

- **등급 + 퍼센트 동시 제공**: "상권 활력도: B등급 (75%)"로 AI가 해석하기 쉬움
- **서울/비서울 조건부 섹션**: 골목상권 데이터가 없으면 해당 섹션 자체가 생략됨
- **수치 포맷팅**: 거래가에 쉼표, 인구수에 `toLocaleString()` 적용

#### 데이터 주입의 약점

| 문제 | 설명 |
|:-----|:-----|
| **원시 데이터 부족** | AI에게 "생존율 78%"만 전달. "활성 45개 / 폐업 13개" 같은 원시 수치도 주면 AI가 더 구체적으로 설명 가능 |
| **시계열 데이터 없음** | 월별 고용 추이, 거래가 변동 등 트렌드 정보가 없어 "최근 추세" 분석이 불가능 |
| **비교 기준 없음** | "경쟁 강도 D등급"만 있고, "같은 업종 전국 평균 대비" 같은 기준이 없음 |
| **반경 내 세부 분포 없음** | 사업장 20개가 한쪽에 몰려있는지, 고르게 퍼져있는지 알 수 없음 |

---

### 1.3 출력 스키마 분석

```typescript
{
  verdict: "추천" | "조건부 추천" | "주의" | "비추천",
  summary: string,           // 50자 이내 한 줄
  strengths: string[],       // 3개
  risks: string[],           // 3개
  recommendations: string[], // 3개
  detailedAnalysis: string,  // 3~5문단 마크다운
}
```

| 필드 | 평가 |
|:-----|:-----|
| `verdict` (4단계) | 점수 구간(80/60/40)과 대응. 적절함 |
| `summary` (50자) | 짧아서 한눈에 파악 가능. 다만 50자 제한이 너무 짧을 수 있음 |
| `strengths/risks/recommendations` (각 3개 고정) | 3개 고정은 데이터가 부족하면 억지 항목 생성 위험 |
| `detailedAnalysis` (3~5문단) | 마크다운 지원이지만, 현재 UI(`whitespace-pre-wrap`)에서 마크다운 렌더링이 제대로 안 될 수 있음 |

---

### 1.4 데이터 신뢰도 관련 현재 상태

| 항목 | 현재 처리 |
|:-----|:---------|
| **데이터 출처 명시** | 프롬프트에 명시 안 됨. AI가 "공공데이터에 따르면"이라고 알아서 쓸 수도, 안 쓸 수도 있음 |
| **데이터 갱신 시점** | 언급 없음. NPS는 월 단위, 부동산은 3개월 지연인데 AI가 "최신 데이터"라고 오해할 수 있음 |
| **누락 데이터 처리** | KOSIS/골목상권 없으면 섹션 자체 생략. AI가 "데이터 없음"을 인지하지 못할 수 있음 |
| **면책 조항** | 시스템 프롬프트 마지막에 "공공 데이터 기반 참고 자료" 문구 삽입 지시. 다만 위치가 `detailedAnalysis` 끝에만 |
| **점수 산출 근거** | AI에게 점수만 전달. 산출 공식(가중치, 정규화 범위)은 미전달 |

---

## 2. 개선 포인트

### 2.1 프롬프트 톤 & 뉘앙스 개선

#### P1. 점수 구간별 감정 톤 세분화

현재는 4단계(80/60/40) 구간만 정의. AI가 82점과 98점을 같은 톤으로 쓸 수 있음.

```
현재:
  "80점 이상: 꽤 괜찮은 자리예요"

개선안:
  - 90~100점: 확신 있게 밝은 톤.
    "여기 진짜 좋은 자리예요. 데이터가 거의 다 초록불이거든요."
  - 80~89점: 긍정적이지만 한두 가지 주의.
    "전체적으로 괜찮아요. 다만 이 부분은 좀 신경 쓰시면 더 좋겠어요."
  - 70~79점: 가능성은 있지만 전략 필요.
    "나쁘진 않은데, 그냥 들어가면 위험할 수 있어요. 전략이 필요해요."
  - 60~69점: 조심스러운 톤.
    "솔직히 반반이에요. 이걸 커버할 수 있는 확실한 무기가 있으셔야 해요."
  - 40~59점: 걱정되는 톤.
    "데이터만 보면 쉽지 않아요. 정말 하고 싶으시다면 이건 꼭 해결하셔야 해요."
  - 0~39점: 단호하지만 대안 제시.
    "이 자리에서 이 업종은 솔직히 추천 못 해요. 차라리 이런 방향은 어떨까요?"
```

#### P2. 부정 표현 다양화 가이드

현재: "솔직히 좀 걱정되는 부분이에요"만 반복 가능

```
개선안 — 심각도별 표현 풀(pool):

경미한 우려:
  "이 부분은 조금 아쉬워요"
  "살짝 신경 쓰이는 포인트가 있어요"
  "완벽하진 않지만 치명적이진 않아요"

중간 우려:
  "여기는 좀 고민이 필요해요"
  "이 부분은 전략 없이 들어가면 힘들 수 있어요"
  "데이터가 좀 걱정스러운 신호를 보내고 있어요"

심각한 우려:
  "솔직히 이건 꽤 부담스러운 수치예요"
  "이 숫자는 상당히 불리해요. 무시하기 어려운 수준이에요"
  "현실적으로 이 조건에서 성공하기 쉽지 않아요"
```

#### P3. 업종별 관점 차이 명시

현재: "치킨/피자 같은 배달 업종은 주거 밀도가 경쟁보다 중요해" 정도의 일반론만 존재

```
개선안 — 업종 카테고리별 분석 관점 추가:

## 업종별 분석 포커스
- **배달 중심 업종** (치킨, 피자, 중식): 주거 밀도 > 유동인구. 반경 3km 배달 커버리지가 핵심.
  경쟁업체 수보다 "배달앱 내 리뷰 경쟁력"을 언급해.
- **방문형 업종** (카페, 미용실, 음식점): 유동인구 > 주거 밀도. 역세권/오피스가 가까우면 강점.
  "점심 시간대 오피스 수요"나 "주말 데이트 코스" 같은 시나리오로 설명해.
- **생필품 업종** (편의점, 세탁소): 주거 밀도가 거의 전부. 경쟁 반경이 좁으므로 500m 이내 경쟁을 강조해.
- **전문 서비스** (학원, 병원): 상권보다 접근성과 주차. 인구 연령대 구성이 핵심.
```

---

### 2.2 데이터 신뢰도 & 투명성 강화

#### P4. 데이터 출처 + 시점 명시

AI가 "이 데이터는 언제 것인지"를 알아야 정확한 맥락을 전달할 수 있음.

```
현재 프롬프트:
  "동일 업종 사업장: 45개"

개선안:
  "동일 업종 사업장: 45개 (국민연금공단 사업장 데이터, 2025년 12월 기준)"
  "평균 아파트 거래가: 85,000만원 (국토교통부 실거래가, 2025년 10월 거래 기준)"
  "총 인구: 544,873명 (통계청 KOSIS, 2025년 연간 데이터)"
```

프롬프트에 이 정보를 추가하면, AI가 리포트에서 자연스럽게 인용할 수 있음:

> "국민연금 데이터(2025년 12월 기준)를 보면, 이 반경 내에 같은 업종 사업장이 45개 있어요."

#### P5. 누락 데이터 명시적 전달

현재: KOSIS/골목상권 데이터가 없으면 섹션 자체를 생략 → AI가 "이 데이터가 없다"는 사실 자체를 모름.

```
개선안:
  ### 인구 현황
  - 데이터 없음 (비서울 지역은 KOSIS 조회 실패 시 미제공)

  ### 서울시 골목상권 분석
  - 해당 없음 (서울 외 지역)
```

AI가 이걸 인지하면 리포트에서:

> "이 지역은 서울시 골목상권 빅데이터가 제공되지 않아서, 추정매출이나 소비 패턴은 NPS 데이터 중심으로 분석했어요. 참고로 서울 같은 업종 평균과 비교하면..."

#### P6. 점수 산출 근거 요약 전달

AI가 점수의 의미를 정확히 이해하면 해석 품질이 올라감.

```
개선안 — 프롬프트에 추가:

### 점수 산출 기준 (참고)
- 상권 활력도(30점): 신규 창업 비율 30% + 평균 직원 규모 40% + 활성 비율 30%
- 경쟁 강도(25점): 반경 내 동일 업종 밀도. 밀도 낮을수록 높은 점수(역비례)
- 생존율(20점): 활성 사업장 / (활성 + 폐업). 50% 이하=0점, 90% 이상=만점
- 주거 밀도(15점): 아파트 거래 건수 40% + 세대수 35% + 인구수 25%
- 소득 수준(10점): 평균 아파트 거래가 / 전국 평균(4.5억). 0.5배=0점, 2배=만점
```

---

### 2.3 리포트 구조 & 가독성 개선

#### P7. 출력 스키마 유연화

현재: `strengths`, `risks`, `recommendations` 각 3개 고정
문제: 데이터가 부족한 지역(예: 소도시)에서 억지로 3개를 채우면 품질 하락

```
현재:
  "strengths": ["강점 1", "강점 2", "강점 3"]

개선안:
  "strengths": ["강점 1", ...],   // 1~5개, 데이터에 근거한 것만
  "risks": ["위험 1", ...],       // 1~5개
  "recommendations": ["제언 1", ...], // 2~4개, 실행 가능한 것만
```

프롬프트 지시 추가:

```
- strengths, risks, recommendations는 데이터에 근거가 있는 것만 작성해. 억지로 개수를 채우지 마.
- 최소 1개, 최대 5개. 정말 할 말이 없으면 1개라도 괜찮아.
```

스키마 변경:

```typescript
// 현재
strengths: z.array(z.string()),
// 개선
strengths: z.array(z.string()).min(1).max(5),
```

#### P8. detailedAnalysis 구조화

현재: "3~5문단의 상세 분석 (마크다운 지원)"만 지시 → AI가 자유 형식으로 작성
문제: 매번 구성이 달라져서 일관성 없음. 마크다운이 UI에서 렌더링 안 될 수 있음.

```
개선안 — 문단별 역할 지정:

detailedAnalysis는 아래 순서로 4개 문단을 써:

1문단 — [상권 종합 진단]
  이 위치의 상권이 어떤 성격인지 큰 그림을 그려줘.
  "이 동네는 ~~한 성격의 상권이에요" 로 시작.

2문단 — [핵심 지표 해석]
  가장 중요한 2~3개 지표를 깊이 있게 해석해. 숫자를 꼭 인용해.

3문단 — [실전 전략]
  이 데이터를 바탕으로 실제 창업할 때 어떻게 접근해야 하는지 구체 전략을 제시해.
  오픈 시간, 메뉴 구성, 마케팅 채널 같은 실행 가능한 것 위주로.

4문단 — [데이터 한계 안내]
  이 리포트가 참고 자료임을 안내하고, 현장 답사/전문가 상담 병행을 권고해.
```

#### P9. summary 길이 확장

현재: 50자 이내 → "강남역 치킨집, 경쟁은 치열하지만 배후수요 탄탄" 정도만 가능
50자로는 verdict의 이유를 담기 어려움.

```
개선안:
  "summary": "한 줄 종합 판단 (80자 이내)",
```

예시:
- 50자: "강남역 치킨, 경쟁 치열하나 배후수요 좋음. 차별화 전략 필수"
- 80자: "강남역 근처 치킨 창업, 경쟁 업체가 많지만 주거 밀도와 소득 수준이 높아 차별화 전략만 잘 세우면 가능성 있어요"

---

### 2.4 읽기 편한 리포트를 위한 UX 개선

#### P10. 마크다운 렌더링 적용

현재 `report-viewer.tsx`:

```tsx
<div className="prose prose-invert max-w-none text-sm leading-relaxed whitespace-pre-wrap">
  {report.detailedAnalysis}
</div>
```

`whitespace-pre-wrap`은 마크다운을 **원시 텍스트**로 표시함.
프롬프트에서 "마크다운 지원"이라고 했지만, 실제로는 렌더링이 안 됨.

```
개선안:
  - react-markdown 또는 @tailwindcss/typography의 prose 클래스 활용
  - 또는 프롬프트에서 마크다운 사용을 금지하고 순수 텍스트로 통일
```

마크다운을 쓸 거라면:

```tsx
import ReactMarkdown from "react-markdown";

<div className="prose prose-invert max-w-none text-sm">
  <ReactMarkdown>{report.detailedAnalysis}</ReactMarkdown>
</div>
```

마크다운을 안 쓸 거라면 프롬프트를 수정:

```
- detailedAnalysis는 순수 텍스트로만 써. 마크다운 문법(#, **, - 등)은 사용하지 마.
- 문단 구분은 빈 줄(\n\n)로만 해.
```

#### P11. 강점/위험/제언 카드에 데이터 근거 태그 추가

현재: "주변 배후 수요가 탄탄해요" (근거 불명)

```
개선안 — 출력 스키마에 근거 필드 추가:

"strengths": [
  { "text": "주변 배후 수요가 탄탄해요", "source": "KOSIS 인구 54만명 + 거래 120건" },
  ...
]
```

또는 프롬프트에서 인라인 근거 요구:

```
- strengths, risks에는 반드시 근거 수치를 괄호로 포함해.
  ✅ "주변 배후 수요가 탄탄해요 (인구 54만명, 아파트 거래 120건/월)"
  ❌ "주변 배후 수요가 탄탄해요"
```

#### P12. verdict에 이모지 또는 시각적 강도 추가

현재: "추천" / "비추천" 텍스트만

```
개선안 — 스키마에 confidenceLevel 추가:

{
  "verdict": "조건부 추천",
  "confidenceLevel": 3,  // 1~5 스케일 (데이터 충분성 기반)
  ...
}
```

프롬프트 지시:

```
- confidenceLevel은 이 판단에 대한 데이터 신뢰도를 1~5로 평가해.
  5: 모든 지표 데이터가 충분하고 일관됨
  4: 대부분 충분하지만 일부 누락
  3: 핵심 데이터는 있지만 보조 데이터 부족
  2: 데이터가 부분적이어서 판단에 불확실성 있음
  1: 데이터가 매우 부족해서 참고 수준만 가능
```

UI에서 "데이터 신뢰도: ★★★★☆" 같은 시각적 표현 가능.

---

### 2.5 골목상권 데이터 활용 심화 (서울)

#### P13. 매출 데이터 해석 가이드 구체화

현재: "월 예상 매출 범위를 구체적으로 제시해. 분기 매출을 3으로 나눈 값 기준으로."

문제: AI가 단순히 `분기매출 ÷ 3`만 하면 오해의 소지가 큼.
(골목상권 추정매출은 해당 업종 전체 상권의 합산이지, 개별 점포 매출이 아님)

```
개선안:

- 골목상권 추정매출은 해당 업종 상권 전체의 합산 매출이야. 개별 점포 매출이 아님에 주의해.
- 점포당 추정 월매출 = (분기 추정매출 ÷ 3) ÷ 해당 업종 점포수
- 이 수치는 "이 상권에서 평균적인 점포가 벌 수 있는 금액"의 추정치로 안내해.
  단, "실제 매출은 입지, 메뉴, 마케팅에 따라 크게 달라질 수 있어요"라는 단서를 꼭 붙여.
```

#### P14. 상권변화지표 해석 개선

현재: "HH(다이나믹)이면 강점, LL(정체)이면 위험"으로 단순화

```
개선안 — 4가지 등급별 시나리오 해석:

- HH (다이나믹): "가게가 많이 열리기도 하고 닫히기도 해요. 경쟁이 치열하지만 수요도 있다는 뜻이에요.
  차별화 포인트가 확실하면 기회가 있어요."
- HL (상위 안정): "기존 가게들이 오래 살아남는 상권이에요. 좋은 신호지만, 신규 진입자에게는
  기존 업체와의 경쟁이 부담될 수 있어요."
- LH (축소): "새로 여는 곳보다 닫는 곳이 많아요. 상권이 위축되고 있는 신호예요.
  이 추세가 계속되면 위험해요."
- LL (정체): "변화가 거의 없는 상권이에요. 안정적이라고도 볼 수 있지만,
  새로운 수요가 유입되지 않고 있다는 뜻이기도 해요."
```

---

## 3. 우선순위별 개선 로드맵

| 우선순위 | 개선 포인트 | 난이도 | 기대 효과 |
|:--------:|:-----------|:------:|:---------|
| 🔴 P4 | 데이터 출처 + 시점 명시 | 낮음 | 신뢰도 대폭 향상. 프롬프트 문자열만 수정 |
| 🔴 P6 | 점수 산출 근거 요약 전달 | 낮음 | AI 해석 정확도 향상. 프롬프트에 텍스트 추가 |
| 🔴 P8 | detailedAnalysis 문단별 구조화 | 낮음 | 리포트 일관성 확보. 프롬프트만 수정 |
| 🔴 P11 | 강점/위험에 데이터 근거 필수 | 낮음 | "근거 없는 감상" 방지. 프롬프트만 수정 |
| 🟡 P1 | 점수 구간별 감정 톤 세분화 | 낮음 | 리포트 다양성 향상. 프롬프트만 수정 |
| 🟡 P2 | 부정 표현 다양화 | 낮음 | 읽는 맛 개선. 프롬프트만 수정 |
| 🟡 P5 | 누락 데이터 명시적 전달 | 낮음 | AI 맥락 이해도 향상. 프롬프트 조건문 수정 |
| 🟡 P9 | summary 80자 확장 | 낮음 | 요약 품질 향상. 프롬프트 + 스키마 수정 |
| 🟡 P13 | 골목상권 매출 해석 가이드 | 낮음 | 데이터 오해 방지. 프롬프트만 수정 |
| 🟡 P14 | 상권변화지표 해석 개선 | 낮음 | AI가 더 정확한 상권 진단. 프롬프트만 수정 |
| 🟢 P3 | 업종별 관점 차이 명시 | 중간 | 업종 맞춤 분석. 프롬프트 + 업종 매핑 필요 |
| 🟢 P7 | 출력 스키마 유연화 (1~5개) | 중간 | 억지 항목 방지. 스키마 + UI 수정 |
| 🟢 P10 | 마크다운 렌더링 적용 | 중간 | 리포트 가독성 향상. react-markdown 도입 |
| 🟢 P12 | 데이터 신뢰도 레벨 추가 | 중간 | 사용자 판단 도움. 스키마 + UI + 프롬프트 수정 |

---

## 4. 종합 평가

### 현재 프롬프트의 완성도: **B+ (75점)**

| 항목 | 점수 | 평가 |
|:-----|:----:|:-----|
| 페르소나 설정 | 7/10 | 친근한 톤은 좋지만 깊이 부족 |
| 데이터 활용 지시 | 8/10 | 숫자 근거 필수, 등급 해석 가이드 잘 되어있음 |
| 출력 구조 | 7/10 | JSON 구조 명확하지만 유연성 부족 |
| 데이터 신뢰도 | 5/10 | 출처/시점 미명시, 누락 데이터 미인지 |
| 가독성 UX | 6/10 | 마크다운 미렌더링, 근거 태그 없음 |
| 업종별 커스터마이징 | 5/10 | 일반론만 존재, 업종별 분석 관점 부재 |

### 핵심 개선 방향 3가지

1. **"이 숫자는 어디서 왔고, 언제 것인가"를 명시** (P4, P5, P6)
   → 사용자가 리포트를 볼 때 "근거가 있구나"라는 신뢰감

2. **"매번 다른 느낌의 리포트"를 위한 톤 다양화** (P1, P2, P3)
   → 80점짜리 치킨집 리포트와 40점짜리 미용실 리포트가 완전히 다른 느낌

3. **"읽기 쉬운 구조"를 위한 문단 역할 고정** (P8, P11)
   → 어떤 리포트든 "상권 진단 → 지표 해석 → 실전 전략 → 한계 안내" 흐름으로 일관성
