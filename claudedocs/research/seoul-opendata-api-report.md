# 서울 열린데이터광장 API 조사 보고서

## 목적

스코어링 모델 v3 점수 개편에 활용 가능한 서울 열린데이터광장 Open API를 전수 조사하고, 현재 프로젝트의 4대 지표(경쟁 강도, 인구 밀도, 구매력, 상권 활력도)에 매핑하여 활용 방안을 제안한다.

---

## 1. 현황 요약

### 현재 사용 중인 서울시 API (3종)

| 서비스명 | 데이터 | 매핑 지표 |
|---------|--------|----------|
| `VwsmTrdarSelngQq` | 추정매출-상권 | 상권 활력도 (매출 규모) |
| `VwsmTrdarStorQq` | 점포-상권 | 상권 활력도 (점포수, 개폐업률) |
| `VwsmTrdarIxQq` | 상권변화지표-상권 | 상권 활력도 (변화지표 등급) |

추가로 `TbgisTrdarRelm` (영역-상권)을 사용하여 좌표→상권코드 매핑 수행 중.

### 서울 열린데이터광장 상권분석서비스 전체 (48종)

검색 결과 **10개 데이터 카테고리 × 5개 지리 단위 = 48개 API**가 확인됨.

---

## 2. 전체 API 목록 (카테고리별)

### 지리 단위 범례

| 약어 | 단위 | 설명 |
|-----|------|------|
| 서울시 | 서울 전체 | 서울시 총합 데이터 |
| 자치구 | 25개 자치구 | 구 단위 집계 |
| 행정동 | ~420개 행정동 | 동 단위 집계 |
| 상권 | ~1,000+개 상권 | 골목/발달/전통시장/관광특구 |
| 상권배후지 | 상권별 배후지 | 상권 주변 생활권 |

### A. 영역 (5종)

| # | API 명 | 갱신주기 | 비고 |
|---|-------|---------|------|
| 1 | 영역-서울시 | 분기 | 서울시 경계 |
| 2 | 영역-자치구 | 분기 | 자치구 경계 |
| 3 | 영역-행정동 | 분기 | 행정동 경계 |
| 4 | 영역-상권 | 분기 | **상권 폴리곤 좌표 (EPSG:5181)** |
| 5 | 영역-상권배후지 | 분기 | 상권배후지 폴리곤 |

### B. 추정매출 (6종) — 서비스명: `VwsmTrdarSelngQq`

| # | API 명 | 주요 필드 |
|---|-------|----------|
| 6 | 추정매출-서울시 | 당월매출금액, 주중/주말매출, 요일별, 시간대별, 성별, 연령대별 매출 |
| 7 | 추정매출-자치구 | 동일 |
| 8 | 추정매출-행정동 | 동일 |
| 9 | **추정매출-상권** ✅ 사용중 | 동일 |
| 10 | 추정매출-상권배후지 | 동일 |

**출력 필드 상세** (OA-15572 확인):
- `THSMON_SELNG_AMT` (당월매출금액), `THSMON_SELNG_CO` (당월매출건수)
- `MDWK_SELNG_AMT` (주중매출), `WKEND_SELNG_AMT` (주말매출)
- `MON_SELNG_AMT` ~ `SUN_SELNG_AMT` (요일별 매출)
- `TMZON_00_06_SELNG_AMT` ~ `TMZON_21_24_SELNG_AMT` (시간대별 매출)
- `ML_SELNG_AMT` (남성매출), `FML_SELNG_AMT` (여성매출)
- `AGRDE_10_SELNG_AMT` ~ `AGRDE_60_ABOVE_SELNG_AMT` (연령대별 매출)
- `STDR_YYQU_CD` (기준년분기코드), `TRDAR_CD` (상권코드), `SVC_INDUTY_CD` (서비스업종코드)

### C. 점포 (6종) — 서비스명: `VwsmTrdarStorQq`

| # | API 명 | 주요 필드 |
|---|-------|----------|
| 11 | 점포-서울시 | 점포수, 유사업종점포수, 개업수, 폐업수, 프랜차이즈수 |
| 12 | 점포-자치구 | 동일 |
| 13 | 점포-행정동 | 동일 |
| 14 | **점포-상권** ✅ 사용중 | 동일 |
| 15 | 점포-상권배후지 | 동일 |

### D. 상권변화지표 (3종) — 서비스명: `VwsmTrdarIxQq`

| # | API 명 | 주요 필드 |
|---|-------|----------|
| 16 | 상권변화지표-자치구 | 변화지표등급(HH/HL/LH/LL), 생존/폐업 평균영업기간 |
| 17 | 상권변화지표-행정동 | 동일 |
| 18 | **상권변화지표-상권** ✅ 사용중 | 동일 |

### E. 길단위인구 / 생활인구 (5종) — 🆕 신규 활용 추천

| # | API 명 | 주요 필드 |
|---|-------|----------|
| 19 | 길단위인구-서울시 | 총생활인구수, 성별, 연령대별, 시간대별 생활인구 |
| 20 | 길단위인구-자치구 | 동일 |
| 21 | 길단위인구-행정동 | 동일 |
| 22 | **길단위인구-상권** 🔥 | 동일 |
| 23 | **길단위인구-상권배후지** 🔥 | 동일 |

### F. 상주인구 (5종) — 🆕 신규 활용 추천

| # | API 명 | 주요 필드 |
|---|-------|----------|
| 24 | 상주인구-서울시 | 총상주인구수, 성별, 연령대별 상주인구, 가구수 |
| 25 | 상주인구-자치구 | 동일 |
| 26 | 상주인구-행정동 | 동일 |
| 27 | **상주인구-상권** 🔥 | 동일 |
| 28 | **상주인구-상권배후지** 🔥 | 동일 |

### G. 직장인구 (5종) — 🆕 신규 활용 추천

| # | API 명 | 주요 필드 |
|---|-------|----------|
| 29 | 직장인구-서울시 | 총직장인구수, 성별, 연령대별 직장인구 |
| 30 | 직장인구-자치구 | 동일 |
| 31 | 직장인구-행정동 | 동일 |
| 32 | **직장인구-상권** 🔥 | 동일 |
| 33 | **직장인구-상권배후지** 🔥 | 동일 |

### H. 소득소비 (5종) — 🆕 신규 활용 강력 추천

| # | API 명 | 주요 필드 |
|---|-------|----------|
| 34 | 소득소비-서울시 | 추정소득, 추정소비(식료품/의류/생활용품/의료비/교통/여가/교육 등) |
| 35 | 소득소비-자치구 | 동일 |
| 36 | 소득소비-행정동 | 동일 |
| 37 | **소득소비-상권배후지** 🔥🔥 | 동일 |
| 38 | **소득소비-상권** 🔥🔥 | 동일 |

### I. 아파트 (5종) — 🆕 신규 활용 추천

| # | API 명 | 주요 필드 |
|---|-------|----------|
| 39 | 아파트-서울시 | 아파트단지수, 세대수, 면적별 분포, 가격대별 분포 |
| 40 | 아파트-자치구 | 동일 |
| 41 | 아파트-행정동 | 동일 |
| 42 | **아파트-상권배후지** 🔥 | 동일 |
| 43 | **아파트-상권** 🔥 | 동일 |

### J. 집객시설 (5종) — 🆕 신규 활용 추천

| # | API 명 | 주요 필드 |
|---|-------|----------|
| 44 | 집객시설-서울시 | 관공서수, 은행수, 종합병원수, 학교수, 지하철역수, 버스정류장수 등 |
| 45 | 집객시설-자치구 | 동일 |
| 46 | 집객시설-행정동 | 동일 |
| 47 | **집객시설-상권배후지** 🔥 | 동일 |
| 48 | **집객시설-상권** 🔥 | 동일 |

---

## 3. 스코어링 v3 지표별 활용 방안

### 지표 1: 경쟁 강도 (현재: Kakao Places API → 전국 커버)

**현재 상태**: ✅ 완료, 변경 불필요

**보완 가능 서울시 API**:
- `점포-상권` (이미 사용중) → 유사업종 점포수, 프랜차이즈 비율 데이터 보강
- 현재 Kakao Places 기반 경쟁 분석에 서울시 점포 데이터를 **교차 검증용**으로 활용 가능

**추천 우선순위**: ⭐ (낮음 — 이미 잘 동작하는 지표)

---

### 지표 2: 인구 밀도 (현재: KOSIS 통계청 → 전국 커버)

**현재 상태**: 어댑터 완료, 스코어러 미구현

**활용 가능 서울시 API (3종)**:

| API | 서비스명(추정) | 활용 |
|-----|-------------|------|
| **길단위인구-상권** | `VwsmTrdarFlpopQq` | **유동인구** — 실제 발걸음이 닿는 인구, 상권 방문 인구 |
| **상주인구-상권배후지** | `VwsmTrdarRepopQq` | **거주인구** — 잠재 고정 고객층 |
| **직장인구-상권** | `VwsmTrdarWkpopQq` | **주간인구** — 점심/퇴근 후 소비 주체 |

**개편 제안**:
서울 지역에서는 KOSIS의 단순 인구수 대신, 3종 인구 데이터를 복합 활용:

```
서울 인구밀도 점수 = 유동인구 점수(40%) + 상주인구 점수(35%) + 직장인구 점수(25%)
```

- **유동인구(길단위인구)**: 실제 상권 방문자 수 → 매출과 가장 직접적 상관
- **상주인구**: 고정 수요층 규모 → 업종별 안정적 매출 기반
- **직장인구**: 주간 소비인구 → 특히 음식점/카페 업종에 중요

**비서울**: 기존 KOSIS 유지 (전국 커버)

**추천 우선순위**: ⭐⭐⭐⭐ (높음 — 기존 KOSIS보다 훨씬 정밀한 상권 단위 인구 데이터)

---

### 지표 3: 구매력 (현재: 부동산 실거래가 → 전국 커버)

**현재 상태**: 어댑터 완료, 스코어러 미구현

**활용 가능 서울시 API (2종)**:

| API | 서비스명(추정) | 활용 |
|-----|-------------|------|
| **소득소비-상권배후지** 🔥🔥 | `VwsmTrdarNcmCnsmpQq` | **추정소득 + 업종별 추정소비** — 구매력의 직접 지표! |
| **아파트-상권배후지** | `VwsmTrdarAptQq` | **아파트 세대수, 가격대 분포** — 부동산 실거래가 보강 |

**개편 제안**:
서울 지역에서는 간접 지표(아파트 실거래가)만 쓰던 것을 **직접 지표(추정 소득/소비)**로 대체:

```
서울 구매력 점수 = 추정소득 점수(40%) + 추정소비 점수(35%) + 아파트가격 점수(25%)
```

- **추정소득**: 배후지 주민의 소득 수준 → 소비여력의 근본 지표
- **추정소비**: 업종별 소비 패턴 (식료품/의류/여가 등) → 업종 적합도 판단 가능
- **아파트 데이터**: 서울시 자체 아파트 통계로 부동산 실거래가 API 보강

**비서울**: 기존 부동산 실거래가 유지

**추천 우선순위**: ⭐⭐⭐⭐⭐ (최우선 — `소득소비` API는 구매력의 직접 측정값!)

---

### 지표 4: 상권 활력도 (현재: 서울시 골목상권 → 서울만)

**현재 상태**: 클라이언트 완료, 어댑터+스코어러 미구현

**이미 사용 중인 API**: 추정매출, 점포, 상권변화지표

**추가 활용 가능 API (1종)**:

| API | 서비스명(추정) | 활용 |
|-----|-------------|------|
| **집객시설-상권** | `VwsmTrdarFcltyQq` | 관공서/은행/병원/학교/지하철/버스 등 인프라 수 |

**개편 제안**:
현재 상권 활력도 공식에 **집객시설 점수**를 보조 지표로 추가:

```
상권 활력도 = 매출 규모(25%) + 생존 지표(25%) + 상권 변화(20%) + 업종 밀도(15%) + 집객시설(15%)
```

- **집객시설**: 지하철역, 버스정류장, 학교, 병원 등은 **유동인구 유발 요인**
- 집객시설이 많을수록 안정적 유동인구 → 상권 지속 가능성 높음

**추천 우선순위**: ⭐⭐⭐ (중간 — 기존 4개 서브지표에 보조적 추가)

---

## 4. 종합 추천: 신규 연동 우선순위

| 순위 | API | 서비스명(추정) | 대상 지표 | 임팩트 | 난이도 |
|------|-----|-------------|---------|--------|--------|
| **1** | **소득소비-상권배후지** | `VwsmTrdarNcmCnsmpQq` | 구매력 | 🔥🔥🔥 최상 | 중 |
| **2** | **길단위인구-상권** | `VwsmTrdarFlpopQq` | 인구밀도 | 🔥🔥🔥 최상 | 중 |
| **3** | **상주인구-상권배후지** | `VwsmTrdarRepopQq` | 인구밀도 | 🔥🔥 상 | 중 |
| **4** | **직장인구-상권** | `VwsmTrdarWkpopQq` | 인구밀도 | 🔥🔥 상 | 중 |
| **5** | **집객시설-상권** | `VwsmTrdarFcltyQq` | 상권활력도 | 🔥 중 | 하 |
| **6** | **아파트-상권배후지** | `VwsmTrdarAptQq` | 구매력 | 🔥 중 | 하 |

### 구현 시 공통 사항

- **API 기본 URL**: `http://openapi.seoul.go.kr:8088/{KEY}/json/{서비스명}/{start}/{end}/`
- **인증키**: `SEOUL_OPEN_API_KEY` (기존 환경변수 재사용)
- **기존 인프라 활용**: `seoul-golmok/client.ts`의 `fetchSeoulApi()` 함수 재사용 가능
- **캐싱**: 분기별 데이터이므로 30일 TTL 적용 (기존 패턴과 동일)
- **서비스명 주의**: `Vwsm` (소문자 sm) — `VwSm`이 아님
- **페이지네이션**: 1회 최대 1,000건 제한
- **Graceful Degradation**: API 키 없으면 mock JSON 폴백 (기존 패턴)

### ⚠️ 서비스명 검증 필요

위 서비스명은 기존 패턴(`VwsmTrdarSelngQq`, `VwsmTrdarStorQq`, `VwsmTrdarIxQq`)에서 추정한 것이며, **실제 서비스명은 열린데이터광장 각 데이터셋의 Open API 탭에서 반드시 확인 필요**. 접속 시 인증키 관리 페이지에서도 서비스명 목록 확인 가능.

---

## 5. 조사 출처

- [서울 열린데이터광장](https://data.seoul.go.kr/) — "상권분석서비스" 검색 (48건)
- [추정매출-상권 API 상세](https://data.seoul.go.kr/dataList/OA-15572/S/1/datasetView.do) — 필드 목록 확인
- [소득소비-상권배후지](https://data.seoul.go.kr/dataList/OA-15571/S/1/datasetView.do)
- [길단위인구-상권](https://data.seoul.go.kr/dataList/OA-15568/S/1/datasetView.do)
- [상주인구-상권](https://data.seoul.go.kr/dataList/OA-15584/S/1/datasetView.do)
- [집객시설-상권](https://data.seoul.go.kr/dataList/OA-22172/S/1/datasetView.do)
- 프로젝트 코드: `src/server/data-sources/seoul-golmok/client.ts`
